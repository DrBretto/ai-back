var hol = require('../dist/hol.common.js')
var expect = require('expect.js');

describe('Method', () => {
    describe('getCountries', () => {
        it('should return array of countries', () => {
            let result = hol.getCountries();
            expect(result).to.be.an('array')
        })
    })
    describe('setCountry', () => {
        it('should return holliday object with changed country', () => {
            hol.setCountry('sk');

            expect(hol.country).to.eql('sk')
        })

        it('should return false when trying to set non existing country', () => {
            let changed = hol.setCountry('kekele');
            expect(changed).to.eql(false)
        })

        it('should return false when trying to set country to number', () => {
            let changed = hol.setCountry(1);
            expect(changed).to.eql(false)
        })
    })
    describe('findAll', () => {
        it('should return array of objects(hollidays)', () => {
            hol.setCountry('at','k');
            result = hol.findAll(2018);

            expect(result).to.be.an('array')

            result.forEach(res => {
                expect(res).to.be.an('object');
                expect(res.hasOwnProperty('date')).to.eql(true);
                expect(res.hasOwnProperty('name')).to.eql(true);
            })
        })
    })
})